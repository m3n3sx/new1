<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>UI Repair CSS Validation Tests</title>
    
    <!-- Load UI Repair CSS -->
    <link rel="stylesheet" href="../assets/css/ui-repair.css">
    
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            margin: 0;
            padding: 20px;
            background: #f0f0f1;
            color: #1d2327;
        }
        
        .test-container {
            max-width: 1200px;
            margin: 0 auto;
            background: #ffffff;
            border-radius: 8px;
            padding: 24px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }
        
        .test-section {
            margin-bottom: 40px;
            padding: 20px;
            border: 1px solid #dcdcde;
            border-radius: 6px;
        }
        
        .test-section h2 {
            margin-top: 0;
            color: #0073aa;
            border-bottom: 2px solid #0073aa;
            padding-bottom: 8px;
        }
        
        .test-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        
        .test-item {
            padding: 16px;
            border: 1px solid #c3c4c7;
            border-radius: 4px;
            background: #f6f7f7;
        }
        
        .test-item h4 {
            margin-top: 0;
            color: #646970;
        }
        
        .control-group {
            margin-bottom: 16px;
        }
        
        .control-group label {
            display: block;
            margin-bottom: 4px;
            font-weight: 500;
        }
        
        .button-group {
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
            margin-top: 16px;
        }
        
        .status-indicator {
            display: inline-block;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            margin-right: 8px;
        }
        
        .status-pass {
            background: #00a32a;
        }
        
        .status-fail {
            background: #d63638;
        }
        
        .status-pending {
            background: #dba617;
        }
        
        #test-controls {
            position: fixed;
            top: 20px;
            right: 20px;
            background: #ffffff;
            border: 2px solid #0073aa;
            border-radius: 8px;
            padding: 16px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            z-index: 1000;
        }
        
        #test-controls h3 {
            margin: 0 0 12px 0;
            color: #0073aa;
        }
        
        .responsive-test {
            border: 2px dashed #8c8f94;
            padding: 16px;
            margin: 16px 0;
            text-align: center;
            background: #f9f9f9;
        }
        
        @media (max-width: 782px) {
            .responsive-test {
                background: #e7f5e7;
                border-color: #00a32a;
            }
            
            .responsive-test::before {
                content: "✓ Mobile styles active";
                display: block;
                color: #00a32a;
                font-weight: bold;
                margin-bottom: 8px;
            }
        }
        
        @media (max-width: 480px) {
            .responsive-test::before {
                content: "✓ Small mobile styles active";
            }
        }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>UI Repair CSS Validation Tests</h1>
        <p>This page tests the UI repair CSS styles across different components and browsers.</p>
        
        <!-- Test Controls -->
        <div id="test-controls">
            <h3>Test Controls</h3>
            <button onclick="runAllTests()" class="las-button">Run All Tests</button>
            <button onclick="toggleDarkMode()" class="las-button las-button-secondary">Toggle Dark Mode</button>
            <button onclick="toggleHighContrast()" class="las-button las-button-secondary">Toggle High Contrast</button>
            <div id="test-status" style="margin-top: 12px;">
                <span class="status-indicator status-pending"></span>
                <span>Tests not run</span>
            </div>
        </div>
        
        <!-- Tab Navigation Test -->
        <div class="test-section">
            <h2>Tab Navigation Styles</h2>
            <div class="nav-tab-wrapper">
                <a href="#" class="nav-tab nav-tab-active" data-tab="general">General Settings</a>
                <a href="#" class="nav-tab" data-tab="sidebar">Sidebar Menu</a>
                <a href="#" class="nav-tab" data-tab="topbar">Top Bar</a>
                <a href="#" class="nav-tab las-tab-loading" data-tab="loading">Loading Tab</a>
                <a href="#" class="nav-tab las-tab-error" data-tab="error">Error Tab</a>
            </div>
            
            <div class="las-tab-panels">
                <div id="las-tab-general" class="las-tab-panel active">
                    <h3>General Settings Panel</h3>
                    <p>This panel should be visible when the General tab is active.</p>
                </div>
                <div id="las-tab-sidebar" class="las-tab-panel">
                    <h3>Sidebar Menu Panel</h3>
                    <p>This panel should be hidden when not active.</p>
                </div>
                <div id="las-tab-topbar" class="las-tab-panel">
                    <h3>Top Bar Panel</h3>
                    <p>This panel tests tab switching functionality.</p>
                </div>
            </div>
        </div>
        
        <!-- Menu Styles Test -->
        <div class="test-section">
            <h2>Menu and Submenu Styles</h2>
            <div class="test-grid">
                <div class="test-item">
                    <h4>Menu Item with Submenu</h4>
                    <div class="wp-menu-name las-menu-expanded">
                        Expanded Menu Item
                    </div>
                    <ul class="wp-submenu las-submenu-visible">
                        <li><a href="#">Submenu Item 1</a></li>
                        <li><a href="#">Submenu Item 2</a></li>
                        <li><a href="#">Submenu Item 3</a></li>
                    </ul>
                </div>
                
                <div class="test-item">
                    <h4>Menu Loading State</h4>
                    <div class="wp-menu-name las-menu-loading">
                        Loading Menu Item
                    </div>
                </div>
                
                <div class="test-item">
                    <h4>Menu Error State</h4>
                    <div class="wp-menu-name las-menu-error">
                        Error Menu Item
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Form Controls Test -->
        <div class="test-section">
            <h2>Form Control Styles</h2>
            <div class="las-form-container">
                <div class="test-grid">
                    <div class="test-item">
                        <h4>Text Inputs</h4>
                        <div class="control-group">
                            <label>Normal Input</label>
                            <input type="text" class="las-text-input" placeholder="Enter text here">
                        </div>
                        <div class="control-group">
                            <label>Error Input</label>
                            <input type="text" class="las-text-input las-input-error" value="Invalid input">
                            <span class="las-validation-message las-error">This field has an error</span>
                        </div>
                        <div class="control-group">
                            <label>Success Input</label>
                            <input type="text" class="las-text-input las-input-success" value="Valid input">
                            <span class="las-validation-message las-success">This field is valid</span>
                        </div>
                    </div>
                    
                    <div class="test-item">
                        <h4>Buttons</h4>
                        <div class="button-group">
                            <button class="las-button">Primary Button</button>
                            <button class="las-button las-button-secondary">Secondary Button</button>
                            <button class="las-button las-button-danger">Danger Button</button>
                            <button class="las-button las-button-success">Success Button</button>
                            <button class="las-button" disabled>Disabled Button</button>
                            <button class="las-button las-button-loading">Loading Button</button>
                        </div>
                    </div>
                    
                    <div class="test-item">
                        <h4>Toggles and Checkboxes</h4>
                        <div class="control-group">
                            <label>Toggle Switch</label>
                            <div class="las-toggle-wrapper">
                                <div class="las-toggle">
                                    <input type="checkbox" id="toggle1">
                                    <span class="las-toggle-slider"></span>
                                </div>
                            </div>
                        </div>
                        <div class="control-group">
                            <label>Checkbox</label>
                            <div class="las-checkbox">
                                <input type="checkbox" id="checkbox1" checked>
                                <label for="checkbox1">Check this option</label>
                            </div>
                        </div>
                    </div>
                    
                    <div class="test-item">
                        <h4>Sliders and Selects</h4>
                        <div class="control-group">
                            <label>Range Slider</label>
                            <div class="las-slider-wrapper">
                                <input type="range" class="las-slider" min="0" max="100" value="50">
                                <span class="las-slider-value">50</span>
                            </div>
                        </div>
                        <div class="control-group">
                            <label>Select Dropdown</label>
                            <div class="las-select-wrapper">
                                <select class="las-select">
                                    <option>Option 1</option>
                                    <option>Option 2</option>
                                    <option>Option 3</option>
                                </select>
                            </div>
                        </div>
                    </div>
                    
                    <div class="test-item">
                        <h4>Color Picker</h4>
                        <div class="control-group">
                            <label>Color Selection</label>
                            <div class="las-color-picker-wrapper">
                                <input type="color" class="las-color-picker" value="#0073aa">
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Responsive Design Test -->
        <div class="test-section">
            <h2>Responsive Design Test</h2>
            <div class="responsive-test">
                <p>Resize your browser window to test responsive breakpoints:</p>
                <ul style="text-align: left; display: inline-block;">
                    <li>Desktop: > 1024px</li>
                    <li>Tablet: 783px - 1024px</li>
                    <li>Mobile: 481px - 782px</li>
                    <li>Small Mobile: ≤ 480px</li>
                </ul>
            </div>
            
            <div class="test-grid">
                <div class="test-item">
                    <h4>Mobile Tab Layout</h4>
                    <div class="nav-tab-wrapper">
                        <a href="#" class="nav-tab nav-tab-active">Mobile Tab 1</a>
                        <a href="#" class="nav-tab">Mobile Tab 2</a>
                        <a href="#" class="nav-tab">Mobile Tab 3</a>
                    </div>
                </div>
                
                <div class="test-item">
                    <h4>Mobile Form Controls</h4>
                    <input type="text" class="las-text-input" placeholder="Mobile input">
                    <button class="las-button" style="margin-top: 8px;">Mobile Button</button>
                </div>
            </div>
        </div>
        
        <!-- Accessibility Test -->
        <div class="test-section">
            <h2>Accessibility Features</h2>
            <div class="test-grid">
                <div class="test-item">
                    <h4>Focus Indicators</h4>
                    <p>Tab through these elements to test focus styles:</p>
                    <button class="las-button">Focusable Button</button>
                    <input type="text" class="las-text-input" placeholder="Focusable input">
                    <a href="#" class="nav-tab">Focusable Tab</a>
                </div>
                
                <div class="test-item">
                    <h4>Screen Reader Content</h4>
                    <span class="las-sr-only">This text is only for screen readers</span>
                    <p>The text above should be hidden visually but accessible to screen readers.</p>
                </div>
                
                <div class="test-item">
                    <h4>Skip Link</h4>
                    <a href="#main-content" class="las-menu-skip-link">Skip to main content</a>
                    <p>Focus the skip link above (it should appear when focused).</p>
                </div>
            </div>
        </div>
        
        <!-- Browser Compatibility Test -->
        <div class="test-section">
            <h2>Browser Compatibility</h2>
            <div id="browser-info">
                <p>Browser: <span id="browser-name">Detecting...</span></p>
                <p>CSS Features Support:</p>
                <ul id="css-features">
                    <li>Loading...</li>
                </ul>
            </div>
        </div>
        
        <!-- Performance Test -->
        <div class="test-section">
            <h2>Performance Test</h2>
            <div id="performance-results">
                <p>Click "Run All Tests" to measure CSS performance.</p>
            </div>
        </div>
    </div>
    
    <!-- Load CSS Validator -->
    <script src="validate-ui-repair-css.js"></script>
    
    <script>
        // Test functionality
        let isDarkMode = false;
        let isHighContrast = false;
        
        function runAllTests() {
            const statusEl = document.getElementById('test-status');
            statusEl.innerHTML = '<span class="status-indicator status-pending"></span><span>Running tests...</span>';
            
            if (window.lasCSSValidator) {
                window.lasCSSValidator.init().then(() => {
                    const results = window.lasCSSValidator.getResults();
                    const passRate = parseFloat(results.summary.passRate);
                    
                    let statusClass = 'status-fail';
                    let statusText = 'Tests failed';
                    
                    if (passRate >= 80) {
                        statusClass = 'status-pass';
                        statusText = 'Tests passed';
                    } else if (passRate >= 60) {
                        statusClass = 'status-pending';
                        statusText = 'Tests partially passed';
                    }
                    
                    statusEl.innerHTML = `<span class="status-indicator ${statusClass}"></span><span>${statusText} (${passRate}%)</span>`;
                });
            } else {
                statusEl.innerHTML = '<span class="status-indicator status-fail"></span><span>CSS Validator not loaded</span>';
            }
        }
        
        function toggleDarkMode() {
            isDarkMode = !isDarkMode;
            document.body.classList.toggle('las-dark-mode', isDarkMode);
            
            if (isDarkMode) {
                document.documentElement.style.setProperty('--las-ui-bg-primary', '#1d2327');
                document.documentElement.style.setProperty('--las-ui-bg-secondary', '#2c3338');
                document.documentElement.style.setProperty('--las-ui-text-primary', '#f0f0f1');
                document.documentElement.style.setProperty('--las-ui-text-secondary', '#c3c4c7');
            } else {
                document.documentElement.style.removeProperty('--las-ui-bg-primary');
                document.documentElement.style.removeProperty('--las-ui-bg-secondary');
                document.documentElement.style.removeProperty('--las-ui-text-primary');
                document.documentElement.style.removeProperty('--las-ui-text-secondary');
            }
        }
        
        function toggleHighContrast() {
            isHighContrast = !isHighContrast;
            document.body.classList.toggle('las-high-contrast', isHighContrast);
            
            if (isHighContrast) {
                document.documentElement.style.setProperty('--las-ui-border', '#000000');
                document.documentElement.style.setProperty('--las-ui-text-primary', '#000000');
                document.documentElement.style.setProperty('--las-ui-primary', '#0000ff');
            } else {
                document.documentElement.style.removeProperty('--las-ui-border');
                document.documentElement.style.removeProperty('--las-ui-text-primary');
                document.documentElement.style.removeProperty('--las-ui-primary');
            }
        }
        
        // Tab functionality for testing
        document.querySelectorAll('.nav-tab').forEach(tab => {
            tab.addEventListener('click', function(e) {
                e.preventDefault();
                
                // Remove active class from all tabs
                document.querySelectorAll('.nav-tab').forEach(t => t.classList.remove('nav-tab-active'));
                document.querySelectorAll('.las-tab-panel').forEach(p => p.classList.remove('active'));
                
                // Add active class to clicked tab
                this.classList.add('nav-tab-active');
                
                // Show corresponding panel
                const tabId = this.getAttribute('data-tab');
                const panel = document.getElementById(`las-tab-${tabId}`);
                if (panel) {
                    panel.classList.add('active');
                }
            });
        });
        
        // Slider value update
        document.querySelectorAll('.las-slider').forEach(slider => {
            const valueDisplay = slider.parentNode.querySelector('.las-slider-value');
            if (valueDisplay) {
                slider.addEventListener('input', function() {
                    valueDisplay.textContent = this.value;
                });
            }
        });
        
        // Browser detection
        function detectBrowser() {
            const userAgent = navigator.userAgent;
            let browserName = 'Unknown';
            
            if (userAgent.includes('Chrome')) {
                browserName = 'Chrome';
            } else if (userAgent.includes('Firefox')) {
                browserName = 'Firefox';
            } else if (userAgent.includes('Safari')) {
                browserName = 'Safari';
            } else if (userAgent.includes('Edge')) {
                browserName = 'Edge';
            } else if (userAgent.includes('Trident')) {
                browserName = 'Internet Explorer';
            }
            
            document.getElementById('browser-name').textContent = browserName;
            
            // Test CSS features
            const testEl = document.createElement('div');
            document.body.appendChild(testEl);
            
            const features = [];
            
            // Test Grid
            testEl.style.display = 'grid';
            if (getComputedStyle(testEl).display === 'grid') {
                features.push('CSS Grid');
            }
            
            // Test Flexbox
            testEl.style.display = 'flex';
            if (getComputedStyle(testEl).display === 'flex') {
                features.push('CSS Flexbox');
            }
            
            // Test Custom Properties
            testEl.style.setProperty('--test', 'test');
            if (testEl.style.getPropertyValue('--test') === 'test') {
                features.push('CSS Custom Properties');
            }
            
            // Test Transforms
            testEl.style.transform = 'translateX(10px)';
            if (getComputedStyle(testEl).transform !== 'none') {
                features.push('CSS Transforms');
            }
            
            document.body.removeChild(testEl);
            
            const featuresList = document.getElementById('css-features');
            featuresList.innerHTML = features.map(feature => `<li>✓ ${feature}</li>`).join('');
        }
        
        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            detectBrowser();
            
            // Auto-run tests after a short delay
            setTimeout(() => {
                if (window.lasCSSValidator) {
                    runAllTests();
                }
            }, 1000);
        });
        
        // Keyboard navigation test
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Tab') {
                document.body.classList.add('las-keyboard-navigation');
            }
        });
        
        document.addEventListener('mousedown', function() {
            document.body.classList.remove('las-keyboard-navigation');
        });
    </script>
</body>
</html>