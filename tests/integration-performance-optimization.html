<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Performance Optimization Integration Test</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            margin: 20px;
            background: #f1f1f1;
        }
        
        .test-container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .test-section {
            margin-bottom: 30px;
            padding: 20px;
            border: 1px solid #ddd;
            border-radius: 4px;
        }
        
        .test-section h3 {
            margin-top: 0;
            color: #333;
        }
        
        .performance-metrics {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }
        
        .metric-card {
            padding: 15px;
            background: #f8f9fa;
            border-radius: 4px;
            border-left: 4px solid #007cba;
        }
        
        .metric-value {
            font-size: 24px;
            font-weight: bold;
            color: #007cba;
        }
        
        .metric-label {
            font-size: 12px;
            color: #666;
            text-transform: uppercase;
        }
        
        .test-controls {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            margin: 20px 0;
        }
        
        .test-button {
            padding: 8px 16px;
            background: #007cba;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
        }
        
        .test-button:hover {
            background: #005a87;
        }
        
        .test-button:disabled {
            background: #ccc;
            cursor: not-allowed;
        }
        
        .status {
            padding: 10px;
            border-radius: 4px;
            margin: 10px 0;
        }
        
        .status.success {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        
        .status.warning {
            background: #fff3cd;
            color: #856404;
            border: 1px solid #ffeaa7;
        }
        
        .status.error {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
        
        .lazy-component {
            padding: 20px;
            margin: 10px 0;
            background: #e9ecef;
            border-radius: 4px;
            min-height: 100px;
        }
        
        .lazy-component[data-lazy-load] {
            background: #fff3cd;
            border: 2px dashed #ffc107;
        }
        
        .lazy-component.loaded {
            background: #d4edda;
            border: 2px solid #28a745;
        }
        
        .form-controls {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }
        
        .control-group {
            padding: 15px;
            background: #f8f9fa;
            border-radius: 4px;
        }
        
        .control-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: 500;
        }
        
        .control-group input,
        .control-group select {
            width: 100%;
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 4px;
        }
        
        .memory-warning {
            background: #f8d7da;
            color: #721c24;
            padding: 10px;
            border-radius: 4px;
            margin: 10px 0;
            display: none;
        }
        
        .performance-chart {
            height: 200px;
            background: #f8f9fa;
            border: 1px solid #ddd;
            border-radius: 4px;
            margin: 20px 0;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #666;
        }
        
        .log-output {
            background: #2d3748;
            color: #e2e8f0;
            padding: 15px;
            border-radius: 4px;
            font-family: 'Courier New', monospace;
            font-size: 12px;
            max-height: 300px;
            overflow-y: auto;
            margin: 20px 0;
        }
        
        .hidden {
            display: none !important;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>Performance Optimization Integration Test</h1>
        <p>This test validates the LAS Performance Optimizer functionality including lazy loading, memory management, and performance monitoring.</p>
        
        <!-- Performance Metrics Section -->
        <div class="test-section">
            <h3>Performance Metrics</h3>
            <div class="performance-metrics">
                <div class="metric-card">
                    <div class="metric-value" id="init-time">--</div>
                    <div class="metric-label">Initialization Time (ms)</div>
                </div>
                <div class="metric-card">
                    <div class="metric-value" id="memory-usage">--</div>
                    <div class="metric-label">Memory Usage (MB)</div>
                </div>
                <div class="metric-card">
                    <div class="metric-value" id="event-time">--</div>
                    <div class="metric-label">Avg Event Time (ms)</div>
                </div>
                <div class="metric-card">
                    <div class="metric-value" id="lazy-loaded">--</div>
                    <div class="metric-label">Lazy Loaded Components</div>
                </div>
            </div>
            
            <div class="test-controls">
                <button class="test-button" onclick="startPerformanceTest()">Start Performance Test</button>
                <button class="test-button" onclick="generateLoad()">Generate Load</button>
                <button class="test-button" onclick="triggerMemoryCleanup()">Memory Cleanup</button>
                <button class="test-button" onclick="exportReport()">Export Report</button>
            </div>
            
            <div id="performance-status" class="status" style="display: none;"></div>
            <div class="memory-warning" id="memory-warning">
                Memory usage is high. Consider running cleanup.
            </div>
        </div>
        
        <!-- Lazy Loading Test Section -->
        <div class="test-section">
            <h3>Lazy Loading Test</h3>
            <p>Scroll down to trigger lazy loading of components below the fold.</p>
            
            <div class="lazy-component" data-lazy-load="color-picker">
                <h4>Color Picker Component</h4>
                <p>This component will be lazy loaded when it comes into view.</p>
                <input type="color" id="lazy-color-1" value="#007cba">
            </div>
            
            <div class="lazy-component" data-lazy-load="slider">
                <h4>Slider Component</h4>
                <p>This slider will be initialized when visible.</p>
                <input type="range" id="lazy-slider-1" min="0" max="100" value="50">
                <div class="slider-ui"></div>
            </div>
            
            <div class="lazy-component" data-lazy-load="rich-editor">
                <h4>Rich Editor Component</h4>
                <p>This would be a heavy component like a WYSIWYG editor.</p>
                <textarea id="lazy-editor-1" rows="4" cols="50">Sample content...</textarea>
            </div>
            
            <div class="test-controls">
                <button class="test-button" onclick="loadAllLazy()">Load All Lazy Components</button>
                <button class="test-button" onclick="addLazyComponent()">Add New Lazy Component</button>
            </div>
        </div>
        
        <!-- Event Optimization Test Section -->
        <div class="test-section">
            <h3>Event Optimization Test</h3>
            <p>Test delegated event handling and performance monitoring.</p>
            
            <!-- Tab Navigation -->
            <div class="las-tabs-container">
                <div class="las-tab active" data-tab="general">General</div>
                <div class="las-tab" data-tab="advanced">Advanced</div>
                <div class="las-tab" data-tab="performance">Performance</div>
            </div>
            
            <div class="las-tab-panel active" id="las-tab-general">
                <h4>General Settings</h4>
                <div class="form-controls">
                    <div class="control-group">
                        <label for="test-text">Text Input</label>
                        <input type="text" id="test-text" placeholder="Type something...">
                    </div>
                    <div class="control-group">
                        <label for="test-select">Dropdown</label>
                        <select id="test-select">
                            <option value="option1">Option 1</option>
                            <option value="option2">Option 2</option>
                            <option value="option3">Option 3</option>
                        </select>
                    </div>
                </div>
            </div>
            
            <div class="las-tab-panel" id="las-tab-advanced">
                <h4>Advanced Settings</h4>
                <div class="form-controls">
                    <div class="control-group">
                        <label for="test-color">Color Picker</label>
                        <input type="color" id="test-color" value="#007cba">
                    </div>
                    <div class="control-group">
                        <label for="test-range">Range Slider</label>
                        <input type="range" id="test-range" min="0" max="100" value="75">
                    </div>
                </div>
            </div>
            
            <div class="las-tab-panel" id="las-tab-performance">
                <h4>Performance Settings</h4>
                <div class="form-controls">
                    <div class="control-group">
                        <label for="test-checkbox">Enable Optimization</label>
                        <input type="checkbox" id="test-checkbox" checked>
                    </div>
                </div>
            </div>
            
            <div class="test-controls">
                <button class="test-button" onclick="simulateUserInteraction()">Simulate User Interaction</button>
                <button class="test-button" onclick="stressTestEvents()">Stress Test Events</button>
            </div>
        </div>
        
        <!-- Memory Management Test Section -->
        <div class="test-section">
            <h3>Memory Management Test</h3>
            <p>Test memory monitoring and cleanup functionality.</p>
            
            <div class="performance-chart" id="memory-chart">
                Memory usage chart would be displayed here
            </div>
            
            <div class="test-controls">
                <button class="test-button" onclick="createMemoryPressure()">Create Memory Pressure</button>
                <button class="test-button" onclick="monitorMemory()">Monitor Memory</button>
                <button class="test-button" onclick="testMemoryLeaks()">Test Memory Leaks</button>
            </div>
        </div>
        
        <!-- DOM Change Test Section -->
        <div class="test-section">
            <h3>DOM Change Handling Test</h3>
            <p>Test dynamic DOM changes and component re-initialization.</p>
            
            <div id="dynamic-content">
                <!-- Dynamic content will be added here -->
            </div>
            
            <div class="test-controls">
                <button class="test-button" onclick="addDynamicTab()">Add Dynamic Tab</button>
                <button class="test-button" onclick="addDynamicForm()">Add Dynamic Form</button>
                <button class="test-button" onclick="removeDynamicContent()">Remove Content</button>
            </div>
        </div>
        
        <!-- Test Results -->
        <div class="test-section">
            <h3>Test Results</h3>
            <div id="test-results" class="log-output">
                Test results will appear here...
            </div>
        </div>
    </div>

    <!-- Load Dependencies -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://code.jquery.com/ui/1.13.2/jquery-ui.min.js"></script>
    
    <!-- Load LAS Modules -->
    <script src="../../assets/js/modules/performance-optimizer.js"></script>
    
    <script>
        // Test Framework
        class PerformanceIntegrationTest {
            constructor() {
                this.optimizer = null;
                this.mockCore = null;
                this.testResults = [];
                this.lazyLoadedCount = 0;
                this.memoryData = [];
                
                this.initializeMockCore();
                this.initializeTest();
            }
            
            initializeMockCore() {
                this.mockCore = {
                    components: new Map(),
                    
                    get: (name) => {
                        return this.mockCore.components.get(name);
                    },
                    
                    emit: (eventName, data) => {
                        this.log(`Event emitted: ${eventName}`, data);
                    }
                };
                
                // Mock managers
                this.mockCore.components.set('tabs', {
                    setActiveTab: (tabId) => {
                        this.switchTab(tabId);
                        this.log(`Tab switched to: ${tabId}`);
                    },
                    discoverTabElements: () => {
                        this.log('Tab elements rediscovered');
                    }
                });
                
                this.mockCore.components.set('menu', {
                    showSubmenu: (menuId) => {
                        this.log(`Submenu shown: ${menuId}`);
                    },
                    discoverMenuElements: () => {
                        this.log('Menu elements rediscovered');
                    }
                });
                
                this.mockCore.components.set('forms', {
                    handleControlChange: (controlId, value, options) => {
                        this.log(`Form control changed: ${controlId} = ${value}`, options);
                    },
                    discoverFormControls: () => {
                        this.log('Form controls rediscovered');
                    }
                });
            }
            
            async initializeTest() {
                try {
                    this.log('Initializing Performance Optimizer...');
                    
                    // Create performance optimizer
                    this.optimizer = new LASPerformanceOptimizer(this.mockCore);
                    
                    // Initialize
                    const startTime = performance.now();
                    await this.optimizer.init();
                    const initTime = performance.now() - startTime;
                    
                    this.updateMetric('init-time', initTime.toFixed(2));
                    
                    // Start monitoring
                    this.startMonitoring();
                    
                    this.log(`Performance Optimizer initialized in ${initTime.toFixed(2)}ms`);
                    this.showStatus('Performance Optimizer initialized successfully', 'success');
                    
                } catch (error) {
                    this.log(`Initialization failed: ${error.message}`, 'error');
                    this.showStatus(`Initialization failed: ${error.message}`, 'error');
                }
            }
            
            startMonitoring() {
                // Update metrics every second
                setInterval(() => {
                    this.updateMetrics();
                }, 1000);
                
                // Monitor memory every 5 seconds
                setInterval(() => {
                    this.monitorMemoryUsage();
                }, 5000);
            }
            
            updateMetrics() {
                if (!this.optimizer) return;
                
                const metrics = this.optimizer.getMetrics();
                
                // Update memory usage
                if (performance.memory) {
                    const memoryMB = (performance.memory.usedJSHeapSize / 1024 / 1024).toFixed(2);
                    this.updateMetric('memory-usage', memoryMB);
                    
                    // Check memory warning
                    if (performance.memory.usedJSHeapSize > this.optimizer.memoryThreshold) {
                        document.getElementById('memory-warning').style.display = 'block';
                    } else {
                        document.getElementById('memory-warning').style.display = 'none';
                    }
                }
                
                // Update event time
                if (metrics.event_handling_time) {
                    this.updateMetric('event-time', metrics.event_handling_time.average.toFixed(2));
                }
                
                // Update lazy loaded count
                this.updateMetric('lazy-loaded', this.lazyLoadedCount);
            }
            
            updateMetric(id, value) {
                const element = document.getElementById(id);
                if (element) {
                    element.textContent = value;
                }
            }
            
            monitorMemoryUsage() {
                if (performance.memory) {
                    const memoryInfo = {
                        used: performance.memory.usedJSHeapSize,
                        total: performance.memory.totalJSHeapSize,
                        timestamp: Date.now()
                    };
                    
                    this.memoryData.push(memoryInfo);
                    
                    // Keep only last 100 entries
                    if (this.memoryData.length > 100) {
                        this.memoryData = this.memoryData.slice(-100);
                    }
                }
            }
            
            switchTab(tabId) {
                // Remove active class from all tabs and panels
                document.querySelectorAll('.las-tab').forEach(tab => {
                    tab.classList.remove('active');
                });
                document.querySelectorAll('.las-tab-panel').forEach(panel => {
                    panel.classList.remove('active');
                });
                
                // Add active class to selected tab and panel
                const tab = document.querySelector(`[data-tab="${tabId}"]`);
                const panel = document.getElementById(`las-tab-${tabId}`);
                
                if (tab) tab.classList.add('active');
                if (panel) panel.classList.add('active');
            }
            
            log(message, data = null) {
                const timestamp = new Date().toLocaleTimeString();
                const logEntry = `[${timestamp}] ${message}`;
                
                if (data) {
                    console.log(logEntry, data);
                } else {
                    console.log(logEntry);
                }
                
                const logOutput = document.getElementById('test-results');
                if (logOutput) {
                    logOutput.innerHTML += logEntry + '\n';
                    logOutput.scrollTop = logOutput.scrollHeight;
                }
            }
            
            showStatus(message, type = 'info') {
                const statusElement = document.getElementById('performance-status');
                if (statusElement) {
                    statusElement.textContent = message;
                    statusElement.className = `status ${type}`;
                    statusElement.style.display = 'block';
                    
                    // Hide after 5 seconds
                    setTimeout(() => {
                        statusElement.style.display = 'none';
                    }, 5000);
                }
            }
        }
        
        // Global test instance
        let testInstance;
        
        // Initialize test when page loads
        document.addEventListener('DOMContentLoaded', () => {
            testInstance = new PerformanceIntegrationTest();
        });
        
        // Test Functions
        function startPerformanceTest() {
            if (!testInstance) return;
            
            testInstance.log('Starting comprehensive performance test...');
            
            // Test initialization time
            const initMetrics = testInstance.optimizer.getMetrics();
            if (initMetrics.initialization_time) {
                const initTime = initMetrics.initialization_time.current;
                const target = testInstance.optimizer.targets.initializationTime;
                
                if (initTime < target) {
                    testInstance.showStatus(`Initialization time: ${initTime.toFixed(2)}ms (✓ under ${target}ms target)`, 'success');
                } else {
                    testInstance.showStatus(`Initialization time: ${initTime.toFixed(2)}ms (✗ exceeds ${target}ms target)`, 'warning');
                }
            }
            
            // Test lazy loading
            setTimeout(() => {
                loadAllLazy();
            }, 1000);
            
            // Test event handling
            setTimeout(() => {
                stressTestEvents();
            }, 2000);
        }
        
        function generateLoad() {
            if (!testInstance) return;
            
            testInstance.log('Generating system load...');
            
            // Create multiple DOM elements
            for (let i = 0; i < 100; i++) {
                const element = document.createElement('div');
                element.className = 'test-element';
                element.textContent = `Test element ${i}`;
                document.body.appendChild(element);
            }
            
            // Trigger multiple events
            for (let i = 0; i < 50; i++) {
                setTimeout(() => {
                    const event = new CustomEvent('test-event', { detail: { index: i } });
                    document.dispatchEvent(event);
                }, i * 10);
            }
            
            testInstance.showStatus('System load generated', 'info');
        }
        
        function triggerMemoryCleanup() {
            if (!testInstance || !testInstance.optimizer) return;
            
            testInstance.log('Triggering memory cleanup...');
            testInstance.optimizer.performMemoryCleanup();
            testInstance.showStatus('Memory cleanup performed', 'success');
        }
        
        function exportReport() {
            if (!testInstance || !testInstance.optimizer) return;
            
            const report = testInstance.optimizer.getPerformanceReport();
            const reportJson = JSON.stringify(report, null, 2);
            
            const blob = new Blob([reportJson], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            
            const a = document.createElement('a');
            a.href = url;
            a.download = 'performance-report.json';
            a.click();
            
            URL.revokeObjectURL(url);
            testInstance.showStatus('Performance report exported', 'success');
        }
        
        function loadAllLazy() {
            if (!testInstance || !testInstance.optimizer) return;
            
            testInstance.log('Loading all lazy components...');
            
            const lazyComponents = document.querySelectorAll('[data-lazy-load]');
            lazyComponents.forEach(component => {
                testInstance.optimizer.loadLazyComponent(component);
                component.classList.add('loaded');
                testInstance.lazyLoadedCount++;
            });
            
            testInstance.showStatus(`Loaded ${lazyComponents.length} lazy components`, 'success');
        }
        
        function addLazyComponent() {
            if (!testInstance) return;
            
            const container = document.querySelector('.test-section:nth-child(3)');
            const newComponent = document.createElement('div');
            newComponent.className = 'lazy-component';
            newComponent.setAttribute('data-lazy-load', 'test-component');
            newComponent.innerHTML = `
                <h4>Dynamic Lazy Component</h4>
                <p>This component was added dynamically.</p>
                <input type="text" placeholder="Dynamic input">
            `;
            
            container.appendChild(newComponent);
            testInstance.log('Added new lazy component');
        }
        
        function simulateUserInteraction() {
            if (!testInstance) return;
            
            testInstance.log('Simulating user interactions...');
            
            // Click tabs
            const tabs = document.querySelectorAll('.las-tab');
            tabs.forEach((tab, index) => {
                setTimeout(() => {
                    tab.click();
                }, index * 500);
            });
            
            // Change form controls
            setTimeout(() => {
                const textInput = document.getElementById('test-text');
                if (textInput) {
                    textInput.value = 'Test value';
                    textInput.dispatchEvent(new Event('input', { bubbles: true }));
                }
                
                const select = document.getElementById('test-select');
                if (select) {
                    select.value = 'option2';
                    select.dispatchEvent(new Event('change', { bubbles: true }));
                }
            }, 2000);
            
            testInstance.showStatus('User interaction simulation started', 'info');
        }
        
        function stressTestEvents() {
            if (!testInstance) return;
            
            testInstance.log('Starting event stress test...');
            
            const startTime = performance.now();
            let eventCount = 0;
            
            // Generate rapid events
            const interval = setInterval(() => {
                const tabs = document.querySelectorAll('.las-tab');
                const randomTab = tabs[Math.floor(Math.random() * tabs.length)];
                
                if (randomTab) {
                    randomTab.click();
                    eventCount++;
                }
                
                if (eventCount >= 100) {
                    clearInterval(interval);
                    const duration = performance.now() - startTime;
                    testInstance.log(`Stress test completed: ${eventCount} events in ${duration.toFixed(2)}ms`);
                    testInstance.showStatus(`Stress test: ${eventCount} events in ${duration.toFixed(2)}ms`, 'success');
                }
            }, 10);
        }
        
        function createMemoryPressure() {
            if (!testInstance) return;
            
            testInstance.log('Creating memory pressure...');
            
            // Create large arrays to consume memory
            const largeArrays = [];
            for (let i = 0; i < 10; i++) {
                largeArrays.push(new Array(100000).fill(`memory-test-${i}`));
            }
            
            // Store reference to prevent immediate GC
            window.memoryTestData = largeArrays;
            
            testInstance.showStatus('Memory pressure created', 'warning');
        }
        
        function monitorMemory() {
            if (!testInstance) return;
            
            testInstance.log('Starting memory monitoring...');
            
            const monitor = setInterval(() => {
                if (performance.memory) {
                    const memoryMB = (performance.memory.usedJSHeapSize / 1024 / 1024).toFixed(2);
                    testInstance.log(`Memory usage: ${memoryMB}MB`);
                    
                    if (performance.memory.usedJSHeapSize > testInstance.optimizer.memoryThreshold) {
                        testInstance.log('Memory threshold exceeded!', 'warning');
                        clearInterval(monitor);
                    }
                }
            }, 1000);
            
            // Stop monitoring after 30 seconds
            setTimeout(() => {
                clearInterval(monitor);
                testInstance.log('Memory monitoring stopped');
            }, 30000);
        }
        
        function testMemoryLeaks() {
            if (!testInstance) return;
            
            testInstance.log('Testing for memory leaks...');
            
            const initialMemory = performance.memory ? performance.memory.usedJSHeapSize : 0;
            
            // Create and destroy elements repeatedly
            for (let i = 0; i < 1000; i++) {
                const element = document.createElement('div');
                element.addEventListener('click', () => {});
                document.body.appendChild(element);
                document.body.removeChild(element);
            }
            
            // Check memory after operations
            setTimeout(() => {
                if (performance.memory) {
                    const finalMemory = performance.memory.usedJSHeapSize;
                    const memoryDiff = finalMemory - initialMemory;
                    
                    testInstance.log(`Memory difference: ${(memoryDiff / 1024).toFixed(2)}KB`);
                    
                    if (memoryDiff > 1024 * 1024) { // 1MB
                        testInstance.showStatus('Potential memory leak detected', 'warning');
                    } else {
                        testInstance.showStatus('No significant memory leaks detected', 'success');
                    }
                }
            }, 1000);
        }
        
        function addDynamicTab() {
            if (!testInstance) return;
            
            const tabContainer = document.querySelector('.las-tabs-container');
            const contentContainer = tabContainer.parentElement;
            
            const tabId = `dynamic-${Date.now()}`;
            
            // Add tab button
            const tabButton = document.createElement('div');
            tabButton.className = 'las-tab';
            tabButton.setAttribute('data-tab', tabId);
            tabButton.textContent = 'Dynamic Tab';
            tabContainer.appendChild(tabButton);
            
            // Add tab panel
            const tabPanel = document.createElement('div');
            tabPanel.className = 'las-tab-panel';
            tabPanel.id = `las-tab-${tabId}`;
            tabPanel.innerHTML = `
                <h4>Dynamic Tab Content</h4>
                <p>This tab was added dynamically.</p>
            `;
            contentContainer.appendChild(tabPanel);
            
            testInstance.log(`Added dynamic tab: ${tabId}`);
        }
        
        function addDynamicForm() {
            if (!testInstance) return;
            
            const container = document.getElementById('dynamic-content');
            const formId = `dynamic-form-${Date.now()}`;
            
            const form = document.createElement('div');
            form.className = 'control-group';
            form.innerHTML = `
                <label for="${formId}">Dynamic Input</label>
                <input type="text" id="${formId}" placeholder="Dynamic input field">
            `;
            
            container.appendChild(form);
            testInstance.log(`Added dynamic form: ${formId}`);
        }
        
        function removeDynamicContent() {
            if (!testInstance) return;
            
            const container = document.getElementById('dynamic-content');
            container.innerHTML = '';
            
            // Remove dynamic tabs
            const dynamicTabs = document.querySelectorAll('[data-tab^="dynamic-"]');
            dynamicTabs.forEach(tab => {
                const tabId = tab.getAttribute('data-tab');
                const panel = document.getElementById(`las-tab-${tabId}`);
                
                tab.remove();
                if (panel) panel.remove();
            });
            
            testInstance.log('Removed dynamic content');
        }
    </script>
</body>
</html>